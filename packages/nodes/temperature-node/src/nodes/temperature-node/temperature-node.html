<script type="text/javascript">
  RED.nodes.registerType("Temperature", {
    category: "transform",
    color: "rgb(221, 170, 153)",
    icon: "temperature_plus_minus.svg",
    inputs: 1,
    outputs: 1,
    defaults: {
      name: { value: "" },
      from: { value: "celcius", required: false },
      fromFactor: { value: "1" },
      to: { value: "kelvin", required: false },
      toFactor: { value: "1" },
    },
    label: function () {
      return this.name || "Temperature";
    },
    align: "left",
    oneditprepare: function () {},
  });
</script>

<script type="text/html" data-template-name="Temperature">
  <div class="form-row">
    <label for="node-input-name"> Name</label>
    <input type="text" id="node-input-name" placeholder="Name" />
  </div>
  <div class="form-row">
    <label for="node-input-from"> From</label>
    <select id="node-input-from" title="The incoming temperature format">
      <option value="celcius" selected="selected">Celcius</option>
      <option value="kelvin">Kelvin</option>
    </select>
  </div>
  <div class="form-row">
    <label for="node-input-to"> To</label>
    <select id="node-input-to" title="The outgoing temperature format">
      <option value="celcius">Celcius</option>
      <option value="kelvin" selected="selected">Kelvin</option>
    </select>
  </div>
</script>

<script type="text/html" data-help-name="Temperature">
  <p>A node converting the temperature between celcius, kelvin</p>

  <h3>Inputs</h3>
  <dl class="message-properties">
    <dt>
      payload
      <span class="property-type">number</span>
    </dt>
    <dd>the value of incoming temperature</dd>
    <dt class="optional">from <span class="property-type">string</span></dt>
    <dd>the incoming Type e.G.: celcius,kelvin</dd>
    <dt class="optional">to <span class="property-type">string</span></dt>
    <dd>the outgoing Type e.G.: celcius,kelvin</dd>
  </dl>

  <h3>Outputs</h3>
  <ol class="node-ports">
    <li>
      Standard output
      <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>the converted temperature value</dd>
      </dl>
    </li>
    <li>
      Standard error
      <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>the conversion error if incoming or outgoing format is not recognized or the same</dd>
      </dl>
    </li>
  </ol>

  <h3>Details</h3>
  <p><code>msg.payload</code> is overwritten with the new temperature value</p>
</script>
